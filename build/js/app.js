async function obtenerPrecios(){try{let e=await fetch("https://www.dolarsi.com/api/api.php?type=valoresprincipales");return await e.json()}catch(e){console.log(e)}}async function procesadarDatos(){(await obtenerPrecios()).forEach((e,o)=>{let t=document.createElement("DIV"),r=document.createElement("H2"),a=document.createElement("DIV"),n=document.createElement("P"),c=document.createElement("P"),l=e.casa.nombre;r.classList.add("bloque__titulo"),r.textContent=l;let d=formatearPrecio(e.casa.compra),s=formatearPrecio(e.casa.venta);l=l.replace(/ /g,""),c.id=l.toLowerCase(),n.innerHTML=`Compra <span class="bloque__precio"> ${d}</span>`,c.innerHTML=`Venta <span class="bloque__precio"> ${s} </span>`,a.classList.add("bloque__contenido"),a.appendChild(n),a.appendChild(c),t.classList.add("bloque"),t.appendChild(r),t.appendChild(a),document.querySelector(".bloques").appendChild(t)}),console.log("datos cargados")}function formatearPrecio(e){let o;return e=(e=e.replace(".","")).replace(",","."),e=Number(e),o=isNaN(e)?"No cotiza":Number(e).toLocaleString("es-AR",{style:"currency",currency:"ARS"}),o}function darkMode(){window.matchMedia("(prefers-color-scheme:dark)").matches&&document.querySelector("body").classList.add("darkmode");document.querySelector(".darkmode__icon").addEventListener("click",()=>{document.querySelector("body").classList.contains("darkmode");document.querySelector("body").classList.toggle("darkmode")})}function calculadora(){document.querySelector(".btn-calculadora").addEventListener("click",()=>{const e=[];let o=document.querySelector("#moneda").value;""===o?e.push("Debes introducir una cantidad"):(o=parseInt(document.querySelector("#moneda").value),o<=0&&e.push("Debes introducir un cantidad mayor a 0"));const t=parseInt(document.querySelector("#convertidorOpciones").selectedIndex),r=parseInt(document.querySelector("#dolarblue").textContent.split("$")[1]);if(0===t&&e.push("Selecciona una opcion valida"),0===e.length){const e=document.querySelector("#resultado_total");let a=0;1===t?(a=o/r,e.textContent=`${o} Pesos son ${formatearPrecio(a)} Dolares`):(a=o*r,e.textContent=`${o} Dolares son ${formatearPrecio(a)} Pesos`);const n=document.querySelector(".resultado");n.style.display="block",eliminarResultado=()=>{n.style.display="none",document.querySelector("#moneda").value="";document.querySelector("#convertidorOpciones").options[0].selected=!0},setTimeout(eliminarResultado,5e3)}else{const o=document.querySelector(".contenedorErrores");console.log(e.length);for(let t=0;t<e.length;t++){let r=document.createElement("P");r.classList.add("error"),r.textContent=e[t],o.appendChild(r)}o.style.display="block",eliminarErrores=()=>{document.querySelector("#moneda").value="";document.querySelector("#convertidorOpciones").options[0].selected=!0,o.innerHTML="",o.style.display="none"},setTimeout(eliminarErrores,6e3)}})}document.addEventListener("DOMContentLoaded",()=>{procesadarDatos(),darkMode(),calculadora()});
//# sourceMappingURL=app.js.map
