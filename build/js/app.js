class Cotizacion{nombre="";precio_compra=0;precio_venta=0;variacion=0;constructor(e,o,t,r){this.nombre=e,this.precio_compra=o,this.precio_venta=t,this.variacion=r}get nombre(){return this.nombre}get precio_compra(){return this.precio_compra}get precio_venta(){return this.precio_venta}get variacion(){return this.variacion}set precio_compra(e){this.precio_compra=e}set precio_venta(e){this.precio_venta=e}set variacion(e){this.variacion=e}}class Cotizaciones{cotizaciones=[];obtenerCotizacion(e){return this.cotizaciones.find(o=>o.nombre===e)}agregarCotizacion(e){this.cotizaciones.push(e)}obtenerCotizaciones(){return this.cotizaciones}}const cotizaciones=new Cotizaciones;async function obtenerPrecios(){try{let e=await fetch("https://www.dolarsi.com/api/api.php?type=valoresprincipales");return await e.json()}catch(e){console.log(e)}}async function procesadarDatos(e){try{const o=await obtenerPrecios();for(x of o){const o=x.casa.nombre,t=formatearPrecio(x.casa.compra),r=formatearPrecio(x.casa.venta),n=formatearPrecio(x.casa.variacion);cotizacion=new Cotizacion(o,t,r,n),e.agregarCotizacion(cotizacion)}}catch(e){console.log(e)}}function formatearPrecio(e){let o;return e=(e=e.replace(".","")).replace(",","."),e=Number(e).toFixed(2),o=isNaN(e)?"No cotiza":e,o}function darkMode(){window.matchMedia("(prefers-color-scheme:dark)").matches&&document.querySelector("body").classList.add("darkmode");document.querySelector(".darkmode__icon").addEventListener("click",()=>{document.querySelector("body").classList.contains("darkmode");document.querySelector("body").classList.toggle("darkmode")})}function calculadora(){document.querySelector(".btn-calculadora").addEventListener("click",()=>{const e=[];let o=document.querySelector("#moneda").value;""===o?e.push("Debes introducir una cantidad"):(o=parseInt(document.querySelector("#moneda").value),o<=0&&e.push("Debes introducir un cantidad mayor a 0"));const t=parseInt(document.querySelector("#convertidorOpciones").selectedIndex),r=parseInt(document.querySelector("#dolarblue").textContent.split("$")[1]);if(0===t&&e.push("Selecciona una opcion valida"),0===e.length){const e=document.querySelector("#resultado_total");let n=0;1===t?(n=o/r,e.textContent=`${o} Pesos son ${n} Dolares`):(n=o*r,e.textContent=`${o} Dolares son ${n} Pesos`);const a=document.querySelector(".resultado");a.style.display="block",eliminarResultado=()=>{a.style.display="none",document.querySelector("#moneda").value="";document.querySelector("#convertidorOpciones").options[0].selected=!0},setTimeout(eliminarResultado,5e3)}else{const o=document.querySelector(".contenedorErrores");for(let t=0;t<e.length;t++){let r=document.createElement("P");r.classList.add("error"),r.textContent=e[t],o.appendChild(r)}o.style.display="block",eliminarErrores=()=>{document.querySelector("#moneda").value="";document.querySelector("#convertidorOpciones").options[0].selected=!0,o.innerHTML="",o.style.display="none"},setTimeout(eliminarErrores,6e3)}})}function comprobarNombres(e){return"Dolar Soja"!==e.nombre&&"Bitcoin"!==e.nombre&&"Argentina"!==e.nombre}function mostrarDatos(e){const o=e.obtenerCotizaciones().filter(comprobarNombres);console.log(o),o.forEach((e,o)=>{let t=document.createElement("DIV"),r=document.createElement("H2"),n=document.createElement("DIV"),a=document.createElement("P"),c=document.createElement("P"),i=e.nombre;"Dolar Contado con Liqui"===i&&(i="Dolar CCL"),r.classList.add("bloque__titulo"),r.textContent=i;let s="$ "+e.precio_compra,l="$ "+e.precio_venta;i=i.replace(/ /g,""),c.id=i.toLowerCase(),a.innerHTML=`Compra <span class="bloque__precio"> ${s}</span>`,c.innerHTML=`Venta <span class="bloque__precio"> ${l} </span>`,n.classList.add("bloque__contenido"),n.appendChild(a),n.appendChild(c),t.classList.add("bloque"),t.appendChild(r),t.appendChild(n),document.querySelector(".bloques").appendChild(t)})}document.addEventListener("DOMContentLoaded",async()=>{darkMode();try{await procesadarDatos(cotizaciones),mostrarDatos(cotizaciones),calculadora()}catch(e){console.log(e)}});
//# sourceMappingURL=app.js.map
