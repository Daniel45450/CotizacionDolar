{"version":3,"sources":["app.js"],"names":["async","obtenerPrecios","res","fetch","json","error","console","log","procesadarDatos","forEach","element","index","bloque","document","createElement","titulo","contenido","compra","venta","nombre","casa","classList","add","textContent","precioCompra","formatearPrecio","precioVenta","replace","id","toLowerCase","innerHTML","appendChild","querySelector","precio","precioFormateado","Number","isNaN","toLocaleString","style","currency","darkMode","window","matchMedia","matches","addEventListener","contains","toggle","calculadora","errores","cantidad","value","push","parseInt","opcionSeleccionada","selectedIndex","split","length","resultado","operacion","conteResultado","display","eliminarResultado","options","selected","setTimeout","contenedorErrores","i","p","eliminarErrores"],"mappings":"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","file":"app.js","sourcesContent":["\r\nasync function obtenerPrecios() {\r\n    const url = 'https://www.dolarsi.com/api/api.php?type=valoresprincipales';\r\n    try {\r\n        let res = await fetch(url);\r\n        let datos = await res.json();\r\n        return datos;\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nasync function procesadarDatos() {\r\n    const datos = await obtenerPrecios();\r\n    \r\n    datos.forEach( (element, index) => {\r\n        let bloque = document.createElement('DIV');\r\n        let titulo = document.createElement('H2');\r\n        let contenido = document.createElement('DIV');\r\n        let compra = document.createElement('P');\r\n        let venta = document.createElement('P');\r\n\r\n        let nombre = element.casa.nombre;\r\n        titulo.classList.add('bloque__titulo');\r\n        titulo.textContent = nombre;\r\n\r\n        let precioCompra = formatearPrecio(element.casa.compra);\r\n        let precioVenta = formatearPrecio(element.casa.venta);\r\n\r\n        nombre = nombre.replace(/ /g,'');\r\n        venta.id = nombre.toLowerCase(); \r\n        compra.innerHTML = `Compra <span class=\"bloque__precio\"> ${precioCompra}</span>`;\r\n        venta.innerHTML = `Venta <span class=\"bloque__precio\"> ${precioVenta} </span>`;\r\n\r\n        contenido.classList.add('bloque__contenido');\r\n        contenido.appendChild(compra);\r\n        contenido.appendChild(venta);\r\n\r\n        bloque.classList.add('bloque');\r\n\r\n        bloque.appendChild(titulo);\r\n        bloque.appendChild(contenido);\r\n\r\n        document.querySelector('.bloques').appendChild(bloque);\r\n    });\r\n    console.log('datos cargados');\r\n}\r\n\r\nfunction formatearPrecio(precio) {\r\n    precio = precio.replace(\".\", \"\");\r\n    precio = precio.replace(\",\", \".\");\r\n    precio = Number(precio);\r\n\r\n    let precioFormateado;\r\n    \r\n    if(isNaN(precio)) {\r\n        precioFormateado = \"No cotiza\";\r\n    } else {\r\n        precioFormateado = Number(precio).toLocaleString('es-AR', {\r\n            style: 'currency',\r\n            currency: 'ARS'          \r\n        })   \r\n    }\r\n \r\n    return precioFormateado;\r\n}\r\n\r\nfunction darkMode() {\r\n\r\n    const prefersDarkMode = window.matchMedia(\"(prefers-color-scheme:dark)\").matches;\r\n    if(prefersDarkMode) {\r\n        document.querySelector('body').classList.add('darkmode');\r\n    }\r\n    \r\n    const icono = document.querySelector('.darkmode__icon');\r\n    icono.addEventListener('click', () => { \r\n\r\n        const darkmode = document.querySelector('body').classList.contains('darkmode');\r\n        if(darkMode) {\r\n            document.querySelector('body').classList.toggle('darkmode');\r\n        } else {\r\n            document.querySelector('body').classList.toggle('darkmode');          \r\n        }\r\n    });\r\n}\r\n\r\nfunction calculadora() {\r\n    const btn = document.querySelector('.btn-calculadora');\r\n    btn.addEventListener('click', ()=> {\r\n        const errores = [];\r\n        let cantidad = document.querySelector('#moneda').value;\r\n        if(cantidad === \"\") {\r\n            errores.push('Debes introducir una cantidad');\r\n        } else {\r\n            cantidad = parseInt(document.querySelector('#moneda').value);\r\n            if(cantidad <= 0) {\r\n                errores.push('Debes introducir un cantidad mayor a 0');                \r\n            }\r\n        }\r\n        const opcionSeleccionada = parseInt(document.querySelector('#convertidorOpciones').selectedIndex);\r\n        const precio = parseInt(document.querySelector('#dolarblue').textContent.split('$')[1]);\r\n        if(opcionSeleccionada === 0) {\r\n            errores.push('Selecciona una opcion valida');\r\n        }\r\n        if(errores.length === 0) {\r\n            const resultado = document.querySelector('#resultado_total');\r\n            let operacion = 0;\r\n            if(opcionSeleccionada === 1) {\r\n                operacion = cantidad / precio;\r\n                resultado.textContent = `${cantidad} Pesos son ${formatearPrecio(operacion)} Dolares`;\r\n            } else {\r\n                operacion = cantidad * precio;\r\n                resultado.textContent = `${cantidad} Dolares son ${formatearPrecio(operacion)} Pesos`;                \r\n            }\r\n\r\n            const conteResultado = document.querySelector('.resultado');\r\n            conteResultado.style.display = 'block';\r\n\r\n            eliminarResultado = () => {\r\n                conteResultado.style.display = 'none';\r\n                document.querySelector('#moneda').value = '';\r\n                const opciones = document.querySelector('#convertidorOpciones');\r\n                opciones.options[0].selected = true; \r\n\r\n            }\r\n\r\n            setTimeout(eliminarResultado,5000);\r\n        } else {\r\n            const contenedorErrores = document.querySelector('.contenedorErrores');\r\n            console.log(errores.length);\r\n            for(let i =0; i<errores.length; i++) {\r\n                let p = document.createElement(\"P\");\r\n                p.classList.add('error');\r\n                p.textContent = errores[i];\r\n                contenedorErrores.appendChild(p);\r\n            }\r\n\r\n            contenedorErrores.style.display = \"block\";\r\n            eliminarErrores = () => {\r\n                document.querySelector('#moneda').value = '';\r\n                const opciones = document.querySelector('#convertidorOpciones');\r\n                opciones.options[0].selected = true; \r\n                contenedorErrores.innerHTML = \"\";\r\n                contenedorErrores.style.display = \"none\";\r\n            }\r\n\r\n            setTimeout(eliminarErrores, 6000);\r\n        }\r\n\r\n    });\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    procesadarDatos();\r\n    darkMode();\r\n    calculadora();\r\n});\r\n\r\n"]}